<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>หน้าหลัก</title>
    <link rel="icon" href="/public/assets/images/NAPHAT_DEV.png" type="image/png">
    <link rel="stylesheet" href="/public/assets/fonts/Anuphan.css">
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@100..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/public/assets/css/style.css">
    <link rel="stylesheet" href="/public/assets/css/responsive.css">
    <link rel="stylesheet" href="/public/assets/css/loader.css">
    <link rel="stylesheet" href="/public/assets/css/slider.css">
    <script defer src="/public/assets/js/script.js"></script>
    <script>
        window.addEventListener("load", () => {
          const loader = document.querySelector(".css-1ltj605");
          document.body.style.overflowY = "hidden"; // ปิดการเลื่อนขณะโหลด
        
          // รอ 3 วินาทีก่อนเพิ่มคลาสซ่อน
          setTimeout(() => {
            loader.classList.add("css-1ltj605-hidden");
        
            // รอ transition เสร็จก่อนลบ loader
            loader.addEventListener("transitionend", () => {
              document.body.removeChild(loader);
              document.body.style.overflowY = ""; // คืนค่าเดิมให้เลื่อนหน้าได้
            });
          }, 3000);
        });

    </script>
</head>
<body>
    <div class="MuiBox-root css-1ltj605 loader css-1ltj605" id="">
        <span class="MuiCircularProgress-root MuiCircularProgress-indeterminate MuiCircularProgress-colorPrimary css-z01bqi" role="progressbar" style="width: 100px; height: 100px;">
    		<img src="/public/assets/images/NewGear.png" width="150px">
    	</span>
    </div>
    <header>
        <div class="container">
            <div class="logo">
                <img src="/public/assets/images/logo.png" alt="NaphatDev Logo">
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">หน้าแรก</a></li>
                    <li><a href="about.html">ประวัติ</a></li>
                    <li><a href="news.html">ข่าวสาร</a></li>
                    <li><a href="contact.html">ติดต่อ</a></li>
                </ul>
                <div class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container a">
        <img src="/public/assets/images/banner.png" width="100%">
        <div class="news">
            <div class="d-flex justify-content-between w-90">
                <h1 data-h1>ข่าวสาร</h1>
                <a href="news">ดูทั้งหมด</a>
            </div>
            <div class="boxes"></div>
        </div>
    </main>
    <main class="container b">
        <div class="dev">
            <div class="d-flex justify-content-between w-90">
                <h1 data-h1>โปรเจกต์</h1>
            </div>
            <div class="mini-boxes">
                <div class="m-box">
                    <img src="/public/assets/images/desc-project.png" alt="" onclick="window.open('https://dara-esc.pages.dev/', '_self')">
                </div>
                <div class="m-box">
                    <img src="/public/assets/images/gearX2-project.png" alt="" onclick="window.open('https://gearx2.pages.dev/', '_self')">
                </div>
                <div class="m-box">
                    <img src="/public/assets/images/RTE-KMITL-project.png" alt="" onclick="window.open('https://rte-kmitl.pages.dev/', '_self')">
                </div>
                <div class="m-box">
                    <img src="/public/assets/images/cnxpattana-project.png" alt="" onclick="window.open('http://cnxpattana.pages.dev/', '_self')">
                </div>
                <div class="m-box">
                    <img src="/public/assets/images/NS-project.png" alt="" onclick="window.open('https://nsgroup.pages.dev/', '_self')">
                </div>
                <div class="m-box">
                    <img src="/public/assets/images/NaphatDev-project.png" alt="" onclick="window.open('#', '_self')">
                </div>
            </div>
        </div>
        <div class="login">
            <h2 data-h2>เข้าสู่ระบบ สำหรับผู้ดูแลระบบ</h2>
            <div class="btn" data-log-in>เข้าสู่ระบบ</div>            
        </div>
    </main>
  
    <footer>
        <div class="container">
            <div class="footer-left">
                <img src="/public/assets/images/logo.png" alt="NaphatDev Logo">
            </div>
            <div class="footer-right">
                <ul>
                    <li><a href="index.html">หน้าแรก</a></li>
                    <li><a href="about.html">ประวัติ</a></li>
                    <li><a href="news.html">ข่าวสาร</a></li>
                    <li><a href="contact.html">ติดต่อ</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 NaphatDev. All rights reserved.
        </div>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
        const apiUrl = "https://script.google.com/macros/s/AKfycbyHNShaLwgNfTLJxnQE4syG8e7vwcTHslZV8kOUUoPc-sXk8cdQ25aqGax5DAUeQwkVQA/exec";
        const container = document.querySelector(".boxes");
        const mainContainer = document.querySelector("main");
        
        const loadMoreContainer = document.createElement("div");
        loadMoreContainer.classList.add("load-more-container");
        
        const loadMoreBtn = document.createElement("button");
        loadMoreBtn.textContent = "ดูเพิ่มเติม";
        loadMoreBtn.classList.add("load-more");
        
        loadMoreContainer.appendChild(loadMoreBtn);
        mainContainer.appendChild(loadMoreContainer);
        
        let allData = [];
        let currentIndex = 0;
        const itemsPerPage = 3;
        
        try {
            const response = await fetch(apiUrl);
            allData = await response.json();
            loadMoreData();
        } catch (error) {
            console.error("Error fetching data:", error);
        }
        
        function loadMoreData() {
            const nextItems = allData.slice(currentIndex, currentIndex + itemsPerPage);
            nextItems.forEach(item => {
                const box = document.createElement("div");
                box.classList.add("box");
                
                box.innerHTML = `
                    <img src="${item.img}" alt="">
                    <h2>${item.title}</h2>
                    <div class="categories">
                        <p>${item.categories1 || ""}</p>
                        <p>${item.categories2 || ""}</p>
                        <p style="background: ${item.color};">${item.status}</p>
                    </div>
                    <p>${item.details}</p>
                `;
                
                container.appendChild(box);
            });
            
            currentIndex += itemsPerPage;
            
            if (currentIndex >= allData.length) {
                loadMoreBtn.style.display = "none";
            }
        }
        
        loadMoreBtn.addEventListener("click", loadMoreData);
    });
    </script>
    <script src="/public/assets/js"></script>
</body>
</html>
